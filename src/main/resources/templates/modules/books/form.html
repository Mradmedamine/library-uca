
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorator="desktop-layout">

	<div id="book-form-container" class="panel panel-default details-container book-details-container" layout:fragment="desktop-page-content"> 
		<th:block th:with="isNewBook=${book.id == null}">
			<div class="panel-heading">
	       		<div class="row">
	                 <div class="col-lg-12">
	                    <span>
	                        <strong>
	                        	<i class="fa fa-files-o fa-fw"></i>
		                        <th:block th:text="#{common.__${isNewBook ? 'new' : 'edit'}__}"></th:block>
								<th:block th:text="#{desktop.books.summary.title.label}"></th:block>
								<th:block th:text="${book.title}"></th:block> 
							</strong>
	                    </span>
	                 </div>
	       		</div>
			</div>				
			<div class="panel-body">
				<div class="col-lg-12">
				    <form class="form-horizontal details-form book-details-form" role="form">
				    	<input id="bookId" type="hidden" name="id" th:value="${book.id}"/>
			    		<div class="form-group">
				    		<label for="name" class="col-sm-2 control-label"><th:block th:text="#{desktop.common.title}"></th:block></label>
				    		<div class="col-sm-6">
				    			<input type="text" name="title" class="form-control"  th:value="${book.title}" th:placeholder="#{desktop.common.title}" />
				    		</div>
				    	</div>
				    	<div class="form-group">
				    		<label for="name" class="col-sm-2 control-label"><th:block th:text="#{desktop.records.description.label}"></th:block></label>
				    		<div class="col-sm-8">
				    			<textarea id="description" name="description" th:text="${book.description}" class="form-control" th:placeholder="#{desktop.records.description.label}" rows="5" th:disabled="${book.description} ? true : false" required></textarea>
				    		</div>
				    	</div>
			    		<div class="form-group">
				    		<label for="authors" class="col-sm-2 control-label"><th:block th:text="#{desktop.common.authors}"></label>
							<select name="authors" class="selectpicker col-sm-5" title="Authors" th:disabled="${isNewBook} ? false : true" required multiple>
								  <option th:each="author : ${authorList}" th:attr="data-tokens=${author.fullname}" th:value="${author.id}" th:text="${author.fullname}">
								  </option>
							</select>			    		
				    	</div>
				    	<div class="form-group">
				    		<label for="type" class="col-sm-2 control-label"><th:block th:text="#{desktop.common.type}"></label>
							<select name="type" class="selectpicker col-sm-3" title="Type" th:disabled="${book.type} ? true : false" required>
								  <option th:each="type : ${bookTypes}" th:attr="data-tokens=${type.value}" th:selected="${type == book.type}" th:value="${type.name}" th:text="#{desktop.books.type.__${type.value}__}">
								  </option>
							</select>			    		
				    		<label for="subject" class="col-sm-1 control-label"><th:block th:text="#{desktop.common.subject}"></label>
				    		<select name="subject" class="selectpicker col-sm-3" title="Subject" th:disabled="${book.subject} ? true : false" required>
								  <option th:each="subject : ${bookSubjects}" th:attr="data-tokens=${subject.value}" th:selected="${subject == book.subject}" th:value="${subject.name}" th:text="#{desktop.books.subject.__${subject.value}__}">
								  </option>
							</select>	
				    	</div>
				    </form>
				    <hr>
				   	<table id="editions-table" class="table table-striped table-bordered table-uca" cellspacing="0" width="100%">
						<thead>
							<tr>
								<th class="hidden">id</th>
								<th>ISBN</th>
								<th>startDate</th>
								<th>endDate</th>
								<th>Price</th>
								<th>Vat</th>
								<th>Pages</th>
								<th>Finalized</th>
							</tr>
						</thead>
						 <tbody>
							<tr th:each="edition : ${editions}">
								<td class="hidden" th:text="${edition.id}"></td>
							    <td th:text="${edition.isbn}"></td>
							    <td th:text="${edition.startDate}"></td>
							    <td th:text="${edition.endDate}"></td>
							    <td th:text="|${edition.price} â‚¬|"></td>
							    <td th:text="|${edition.vat} %|"></td>
							    <td th:text="${edition.pages}"></td>
							    <td><i th:class="|fa ${edition.finalized ? 'fa-check-circle' : 'fa-times'}|" aria-hidden="true"></i></td>
							</tr>
					    </tbody>
					</table>
			   	</div>
			</div>
			<div th:replace="~{/fragments/panel-footer::content (__${isNewBook}__)}">
			</div>
		</th:block>
		<th:block th:include="~{/modules/books/editionModal::content}">
		</th:block>
	</div>
	
	<th:block layout:fragment="js-files"> 	
		<script th:src="@{/js/bookForm.js}" ></script> 
		<script th:inline="javascript"> 
			var bookEditionsUrl = [[@{/books/editions/__${book.id}__}]];
		</script>
	</th:block>
	
</html>